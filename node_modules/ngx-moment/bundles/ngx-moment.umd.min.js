!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("moment")):"function"==typeof define&&define.amd?define("ngx-moment",["exports","@angular/core","moment"],e):e((t=t||self)["ngx-moment"]={},t.ng.core,t.moment)}(this,(function(t,e,r){"use strict";var n=r,o=function(){function t(){}return t.prototype.transform=function(t,e,r){if(void 0===e||"number"==typeof e&&void 0===r)throw new Error("AddPipe: missing required arguments");return n(t).add(e,r)},t}();o.decorators=[{type:e.Pipe,args:[{name:"amAdd"}]}];var i=r,a=function(){function t(e,r){var n=this;this.cdRef=e,this.ngZone=r,t.initTimer(r),t.refs++,this.midnightSub=t.midnight.subscribe((function(){n.ngZone.run((function(){return n.cdRef.markForCheck()}))}))}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=null,a=null,u=0,s=e.length;u<s;u++)null!==e[u]&&("object"!=typeof e[u]||r.isMoment(e[u])?a=i(e[u]):o=e[u]);return i(t).calendar(a,o)},t.prototype.ngOnDestroy=function(){t.refs>0&&t.refs--,0===t.refs&&t.removeTimer(),this.midnightSub.unsubscribe()},t.initTimer=function(r){if(!t.midnight&&(t.midnight=new e.EventEmitter,"undefined"!=typeof window)){var n=t._getMillisecondsUntilUpdate();t.timer=r.runOutsideAngular((function(){return window.setTimeout((function(){t.midnight.emit(new Date),t.removeTimer(),t.initTimer(r)}),n)}))}},t.removeTimer=function(){t.timer&&(window.clearTimeout(t.timer),t.timer=null,t.midnight=null)},t._getMillisecondsUntilUpdate=function(){var t=i();return i().startOf("day").add(1,"days").valueOf()-t.valueOf()+1e3},t}();a.refs=0,a.timer=null,a.midnight=null,a.decorators=[{type:e.Pipe,args:[{name:"amCalendar",pure:!1}]}],a.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:e.NgZone}]};var u=r,s=function(){function t(){}return t.prototype.transform=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t?u(t).format(e[0]):""},t}();s.decorators=[{type:e.Pipe,args:[{name:"amDateFormat"}]}];var f=r,c=function(){function t(){}return t.prototype.transform=function(t,e,r,n){var o=f(t),i=null!==e?f(e):f();return o.diff(i,r,n)},t}();c.decorators=[{type:e.Pipe,args:[{name:"amDifference"}]}];var m=new e.InjectionToken("NGX_MOMENT_OPTIONS"),p=function(){function t(t){this.allowedUnits=["ss","s","m","h","d","M"],this._applyOptions(t)}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===e||1!==e.length)throw new Error("DurationPipe: missing required time unit argument");return r.duration(t,e[0]).humanize()},t.prototype._applyOptions=function(t){var e=this;t&&(t.relativeTimeThresholdOptions&&Object.keys(t.relativeTimeThresholdOptions).filter((function(t){return-1!==e.allowedUnits.indexOf(t)})).forEach((function(e){r.relativeTimeThreshold(e,t.relativeTimeThresholdOptions[e])})))},t}();p.decorators=[{type:e.Pipe,args:[{name:"amDuration"}]}],p.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[m]}]}]};var l=function(){function t(){}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return"string"==typeof t?r.unix(parseInt(t,10)):r.unix(t)},t}();l.decorators=[{type:e.Pipe,args:[{name:"amFromUnix"}]}];var d=r,h=function(){function t(){}return t.prototype.transform=function(t,e){return d(t,e)},t}();h.decorators=[{type:e.Pipe,args:[{name:"amParse"}]}];var g=function(){function t(){}return t.prototype.transform=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return e?r.utc(t,e):r.utc(t)},t}();g.decorators=[{type:e.Pipe,args:[{name:"amFromUtc"}]}];var y=r,v=function(){function t(){}return t.prototype.transform=function(t,e,r){return y(t).isAfter(y(e),r)},t}();v.decorators=[{type:e.Pipe,args:[{name:"amIsAfter"}]}];var T=r,P=function(){function t(){}return t.prototype.transform=function(t,e,r){return T(t).isBefore(T(e),r)},t}();P.decorators=[{type:e.Pipe,args:[{name:"amIsBefore"}]}];var O=r,w=function(){function t(){}return t.prototype.transform=function(t){return O(t).local()},t}();w.decorators=[{type:e.Pipe,args:[{name:"amLocal"}]}];var b=r,x=function(){function t(){}return t.prototype.transform=function(t,e){return b(t).locale(e)},t}();x.decorators=[{type:e.Pipe,args:[{name:"amLocale"}]}];var M=function(){function t(){}return t.prototype.transform=function(t){return r.parseZone(t)},t}();M.decorators=[{type:e.Pipe,args:[{name:"amParseZone"}]}];var U=r,D=function(){function t(){}return t.prototype.transform=function(t,e,r){if(void 0===e||"number"==typeof e&&void 0===r)throw new Error("SubtractPipe: missing required arguments");return U(t).subtract(e,r)},t}();D.decorators=[{type:e.Pipe,args:[{name:"amSubtract"}]}];var S=r,F=function(){function t(t,e){this.cdRef=t,this.ngZone=e}return t.prototype.format=function(t){return t.from(S(),this.lastOmitSuffix)},t.prototype.transform=function(t,e,r){return this.hasChanged(t,e)?(this.lastTime=this.getTime(t),this.lastValue=t,this.lastOmitSuffix=e,this.lastLocale=this.getLocale(t),this.formatFn=r||this.format.bind(this),this.removeTimer(),this.createTimer(),this.lastText=this.formatFn(S(t))):this.createTimer(),this.lastText},t.prototype.ngOnDestroy=function(){this.removeTimer()},t.prototype.createTimer=function(){var t=this;if(!this.currentTimer){var e=S(this.lastValue),r=1e3*this.getSecondsUntilUpdate(e);this.currentTimer=this.ngZone.runOutsideAngular((function(){return"undefined"!=typeof window?window.setTimeout((function(){t.lastText=t.formatFn(S(t.lastValue)),t.currentTimer=null,t.ngZone.run((function(){return t.cdRef.markForCheck()}))}),r):null}))}},t.prototype.removeTimer=function(){this.currentTimer&&(window.clearTimeout(this.currentTimer),this.currentTimer=null)},t.prototype.getSecondsUntilUpdate=function(t){var e=Math.abs(S().diff(t,"minute"));return e<1?1:e<60?30:e<180?300:3600},t.prototype.hasChanged=function(t,e){return this.getTime(t)!==this.lastTime||this.getLocale(t)!==this.lastLocale||e!==this.lastOmitSuffix},t.prototype.getTime=function(t){return r.isDate(t)?t.getTime():r.isMoment(t)?t.valueOf():S(t).valueOf()},t.prototype.getLocale=function(t){return r.isMoment(t)?t.locale():r.locale()},t}();F.decorators=[{type:e.Pipe,args:[{name:"amTimeAgo",pure:!1}]}],F.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:e.NgZone}]};var A=r,Z=function(){function t(){}return t.prototype.transform=function(t){return A(t).utc()},t}();Z.decorators=[{type:e.Pipe,args:[{name:"amUtc"}]}];var _=[o,a,s,c,p,l,h,D,F,Z,g,w,x,M,P,v],I=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:m,useValue:Object.assign({},e)}]}},t}();I.decorators=[{type:e.NgModule,args:[{declarations:_,exports:_}]}],t.AddPipe=o,t.CalendarPipe=a,t.DateFormatPipe=s,t.DifferencePipe=c,t.DurationPipe=p,t.FromUnixPipe=l,t.FromUtcPipe=g,t.IsAfterPipe=v,t.IsBeforePipe=P,t.LocalTimePipe=w,t.LocalePipe=x,t.MomentModule=I,t.NGX_MOMENT_OPTIONS=m,t.ParsePipe=h,t.ParseZonePipe=M,t.SubtractPipe=D,t.TimeAgoPipe=F,t.UtcPipe=Z,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-moment.umd.min.js.map